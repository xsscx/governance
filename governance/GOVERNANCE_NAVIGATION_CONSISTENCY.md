# Navigation Consistency Governance Rule

**Effective Date:** 2026-02-01  
**Rule Type:** MANDATORY  
**Violation Severity:** HIGH  

## Rule Statement

ALL HTML pages generated by the static site generator MUST have identical navigation structure. Any page type missing navigation elements that exist on other page types constitutes a governance violation.

## Navigation Requirements

### Standard Navigation Structure

Every page MUST include this exact navigation:

```html
<nav>
  <ul>
    <li><a href="[path]/index.html">Home</a></li>
    <li><a href="[path]/signatures.html">Signatures</a></li>
    <li><a href="[path]/categories/index.html">Categories</a></li>
    <li><a href="[path]/stats.html">Statistics</a></li>
  </ul>
</nav>
```

Where `[path]` is:
- `.` for root pages (index.html, signatures.html, stats.html)
- `..` for subdirectory pages (categories/*, details/*)

### Page Types Covered

This rule applies to ALL page types:
1. [OK] Index page (index.html)
2. [OK] Signature list pages (signatures.html, signatures-high.html, signatures-medium.html, signatures-low.html)
3. [OK] Statistics page (stats.html)
4. [OK] Category index (categories/index.html)
5. [OK] Category pages (categories/null-pointer-dereference.html, etc.)
6. [OK] Detail pages (details/*.html)

## Verification Requirements

Before claiming navigation update complete, MUST verify:

```bash
# Extract bundle
cd /tmp && rm -rf nav-test && mkdir nav-test && cd nav-test
unzip /path/to/bundle.zip

# Check each page type has Categories link
echo "=== Index page ==="
grep -c "Categories" dist/index.html

echo "=== Signature pages ==="
grep -c "Categories" dist/signatures*.html

echo "=== Stats page ==="
grep -c "Categories" dist/stats.html

echo "=== Category index ==="
grep -c "Categories" dist/categories/index.html

echo "=== Category pages ==="
grep -l "Categories" dist/categories/*.html | grep -v index.html | wc -l

echo "=== Detail pages ==="
grep -l "Categories" dist/details/*.html | wc -l
```

ALL counts must be > 0 and match expected page counts.

## Testing Protocol

### Required Tests Before Commit

1. **Extraction Test**
   ```bash
   unzip bundle.zip -d /tmp/nav-test
   ```

2. **Navigation Presence Test**
   ```bash
   # Must find Categories link in all page types
   grep -r "Categories" /tmp/nav-test/dist/*.html
   grep -r "Categories" /tmp/nav-test/dist/categories/*.html
   grep -r "Categories" /tmp/nav-test/dist/details/*.html
   ```

3. **Structure Consistency Test**
   ```bash
   # Extract navigation from each page type
   grep -A5 "<nav>" /tmp/nav-test/dist/index.html > nav-index.txt
   grep -A5 "<nav>" /tmp/nav-test/dist/categories/index.html > nav-category.txt
   grep -A5 "<nav>" /tmp/nav-test/dist/details/crash-observer.html > nav-detail.txt
   
   # Verify all have same link structure (accounting for path differences)
   ```

4. **Link Path Validation**
   ```bash
   # Root pages must use ./categories/index.html or categories/index.html
   grep 'href="categories/index.html"' /tmp/nav-test/dist/index.html
   
   # Subdirectory pages must use ../categories/index.html
   grep 'href="../categories/index.html"' /tmp/nav-test/dist/categories/heap-overflow.html
   grep 'href="../categories/index.html"' /tmp/nav-test/dist/details/crash-observer.html
   ```

## Violation Consequences

### First Violation (This Session)
- Documentation in governance file (this file)
- LLMCJF warning issued
- Immediate correction required
- Testing protocol created

### Second Violation (Future)
- LLMCJF Hall of Shame entry
- Complete navigation audit required
- Enhanced verification requirements
- Potential workflow suspension

### Third Violation
- Severe LLMCJF violation
- Full project navigation regression test suite required
- Automated verification gates added
- Trust damage: severe

## Prevention Measures

### Generator Code Requirements

When updating navigation in generator:

1. **Single Source of Truth**
   - Define navigation HTML once in a function/variable
   - Reuse across all page generation methods
   - Never duplicate navigation HTML

2. **Required Updates**
   - When adding new navigation element, update ALL page types in same commit
   - Search codebase for all navigation instances
   - Update each one identically (accounting for path differences)

3. **Verification**
   - Generate site
   - Extract bundle
   - Test all page types
   - Document test results in commit message

### Code Search Before Changes

Before modifying navigation:

```bash
# Find all navigation definitions in generator
grep -n "<nav>" scripts/generate_static_site_simple.py

# Verify all instances found
# Update ALL instances in single commit
```

## Implementation History

### 2026-02-01: Initial Violations and Corrections

**Violation 1:** Category pages missing Categories link
- Fixed in commit 97bf8145
- Verified in bundle iccanalyzer-html-report-v2.4-20260201-163821.zip

**Violation 2:** Detail pages missing Categories link  
- Fixed in commit [pending]
- Verified in bundle iccanalyzer-html-report-v2.4-20260201-164947.zip

### Pattern Identified

Navigation updates done incrementally by page type rather than comprehensively. This governance rule prevents recurrence by requiring complete navigation updates across ALL page types in single update.

## Enforcement

This rule is MANDATORY and will be enforced via:
- Pre-commit bundle verification testing
- LLMCJF pattern detection
- Governance violation tracking
- Hall of Shame escalation for repeat violations

---

**Signed:** 2026-02-01  
**Authority:** LLMCJF Governance Framework  
**Review:** Required before any navigation changes
